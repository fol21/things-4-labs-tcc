\definecolor{light-gray}{gray}{0.97}


\chapter{Apêndice}
\label{chapter:apendice}

\section{Guias de instalação}
\label{section:guia}

\textbf{Atenção:} Essas instruções são uma versão de quando este trabalho foi publicado, para obter a versão mais atualizada e outras versões, acesse \url{https://github.com/fol21}. Este guia tem como reproduzir os testes feitos no sistema, que foi testado em distribuições de Windows 10 e Linux.

\subsection{Configurando Broker}
\label{subsection:guia_broker}

\begin{enumerate}

\item Acesse \url{https://mosquitto.org/download/} e siga as instruções para baixar e instalar o Mosquitto;
\item No terminal execute o comando \textit{mosquitto -d}
\item Use o IP e a porta configurada nos exemplos de Publisher e Subscriber;
\item Em C++ as configurações são encontradas no próprio código;
\item Em Javascript acesse o arquivo \textit{config.json} no diretório \textit{example/*/resources} e mude as configurações de IP e Porta;
\end{enumerate}

\subsection{Publishers em C++}
\label{subsection:guia_publishers_cpp}

\begin{enumerate}

\item Siga as instruções de instalação em \url{http://docs.platformio.org/en/latest/installation.html};
\item Acesse \url{https://docs.espressif.com/projects/esp-idf/en/latest/get-started/establish-serial-connection.html} e instale os drivers adequados para o ESP32;
\item Acesse \url{https://github.com/fol21/things-4-labs-acquirer-platform} e baixe o projeto;
\item No diretório do projeto digite os comandos \textit{pio run -t upload -e esp32};
\end{enumerate}

\subsection{Publishers em Javascript}
\label{subsection:guia_publishers_javascript}

\begin{enumerate}
\item Acesse \url{https://nodejs.org/en/} e baixe sua versão do Node.js na versão 8 ou maior;
\item Acesse \url{https://github.com/fol21/things-4-labs-acquirer-raspberrypi} e baixe o projeto;
\item Entre no diretório examples/gpio, presente no projeto;
\item Coloque as informações de IP e Porta no arquivo \textit{resources/config.json};
\item Execute o comando como administrador \textit{npm install};
\item Execute o comando como administrador \textit{node index.js};

\end{enumerate}


\subsection{Subscribers em Javascript}
\label{subsection:guia_subscribers_javascript}

\begin{enumerate}
\item Acesse \url{https://nodejs.org/en/} e baixe sua versão do Node.js na versão 8 ou maior;
\item Acesse \url{https://docs.mongodb.com/manual/installation/} e siga as instruções para instalar e iniciar o mongodb conforme seu Sistema Operacional;
\item Crie uma conta gratuita em \url{https://plot.ly/};
\item Acesse \url{https://github.com/fol21/things-4-labs-console-subscriber} e baixe o projeto;
\item Entre no diretório examples/simple-subscriber, presente no projeto;
\item Coloque as informações de IP e Porta no arquivo \textit{resources/config.json};
\item Coloque seu Id e chave da sua conta do Plotly em \textit{index.js};
\item Execute o comando como administrador \textit{npm install};
\item Execute o comando como administrador \textit{node index.js};

\end{enumerate}


\section{Códigos Fonte}
\label{section:codigos_fonte}

\textbf{Atenção:} Estes códigos são uma versão de quando este trabalho foi publicado, para obter a versão mais atualizada e outras versões, acesse \url{https://github.com/fol21}.

\subsection{Publishers em C++}
\label{subsection:publishers_cpp}


\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=Data Stream Header, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/publisher-c++/data_stream.h}

\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=Data Stream Source, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/publisher-c++/data_stream.cpp}

\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=MQTT Publisher Header em C++, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/publisher-c++/MqttPublisher.h}

\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=MQTT Publisher Source em C++, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/publisher-c++/MqttPublisher.cpp}



\subsection{Publishers em Javascript}
\label{subsection:publishers_javascript}


\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=Data Stream em javascript, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/publisher-js/DataStream.js}

\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=Continous Stream, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/publisher-js/ContinousStream.js}

\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=Periodic Stream em Javascript, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/publisher-js/PeriodicStream.js}

\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=MQTT Publisher Source em Javascript, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/publisher-js/MqttPublisher.js}

\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=Index das implementações, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/publisher-js/index.js}


\subsection{Subscribers em Javascript}
\label{subsection:subscribers_javascript}

\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=MQTT Subscriber Source em Javascript, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/subscriber-js/MqttSubscriber.js}

\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=Index das implementações, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/subscriber-js/index.js}

\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=Data Client para MongoDB, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/subscriber-js/MongoDataClient.js}

\subsection{Códigos fonte das aplicações em consoles}
\label{subsection:teste_fonte}


\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption= Teste do publisher, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/publisher-js/example.js}

\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption=Teste do subscriber, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/subscriber-js/example.js}

\subsection{Códigos fonte das aplicações em plataformas embarcadas}
\label{subsection:teste-plataformas}


\lstinputlisting[language=C++,backgroundcolor= \color{light-gray}, caption= Teste do publisher no ESP32, breaklines=true,basicstyle=\footnotesize\ttfamily]{./03_Conclusao/src/publisher-c++/main.cpp}

